openapi: 3.0.0
info:
  title: RealWorld API - Go Gin
  description: A Realworld API implementation using Go and Gin Framework
  version: 1.0.0
  contact:
    name: API Support

servers:
  - url: http://localhost:8080
    description: Development server
  - url: https://api.example.com
    description: Production server

paths:
  /health:
    get:
      summary: Health check
      description: Check if the API server is running and healthy
      operationId: healthCheck
      tags:
        - Health
      responses:
        "200":
          description: Server is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok

  /api/users:
    post:
      summary: Register a new user
      description: Create a new user account with username, email, and password
      operationId: registerUser
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user
              properties:
                user:
                  type: object
                  required:
                    - username
                    - email
                    - password
                  properties:
                    username:
                      type: string
                      example: john_doe
                      minLength: 1
                    email:
                      type: string
                      format: email
                      example: john@example.com
                    password:
                      type: string
                      format: password
                      example: password123
                      minLength: 1
      responses:
        "201":
          description: User successfully registered
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                        example: 1
                      username:
                        type: string
                        example: john_doe
                      email:
                        type: string
                        example: john@example.com
        "400":
          $ref: "#/components/responses/BadRequest"

  /api/users/login:
    post:
      summary: User login
      description: Login with email and password to get JWT token
      operationId: loginUser
      tags:
        - Authentication
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user
              properties:
                user:
                  type: object
                  required:
                    - email
                    - password
                  properties:
                    email:
                      type: string
                      format: email
                      example: john@example.com
                    password:
                      type: string
                      format: password
                      example: password123
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                        example: 1
                      username:
                        type: string
                        example: john_doe
                      email:
                        type: string
                        example: john@example.com
                      token:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/InvalidCredentials"

  /api/user:
    get:
      summary: Get current authenticated user
      description: Retrieve the information of the currently authenticated user
      operationId: getCurrentUser
      tags:
        - User
      security:
        - BearerAuth: []
      responses:
        "200":
          description: User information retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                        example: 1
                      username:
                        type: string
                        example: john_doe
                      email:
                        type: string
                        example: john@example.com
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"
    put:
      summary: Update current authenticated user
      description: Update the information of the currently authenticated user (email, username, password, image, bio)
      operationId: updateCurrentUser
      tags:
        - User
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - user
              properties:
                user:
                  type: object
                  properties:
                    email:
                      type: string
                      format: email
                      example: newemail@example.com
                    username:
                      type: string
                      example: new_username
                    password:
                      type: string
                      format: password
                      example: newpassword123
                    image:
                      type: string
                      example: https://example.com/avatar.jpg
                    bio:
                      type: string
                      example: This is my bio
      responses:
        "200":
          description: User information updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  user:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                        example: 1
                      username:
                        type: string
                        example: new_username
                      email:
                        type: string
                        example: newemail@example.com
                      image:
                        type: string
                        example: https://example.com/avatar.jpg
                      bio:
                        type: string
                        example: This is my bio
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"

  /api/profiles/{username}:
    get:
      summary: Get user profile
      description: Retrieve user profile by username. Authentication is optional.
      operationId: getProfile
      tags:
        - Profiles
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: Username of the user
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  profile:
                    type: object
                    properties:
                      username:
                        type: string
                        example: john_doe
                      bio:
                        type: string
                        example: Software developer
                      image:
                        type: string
                        example: https://example.com/avatar.jpg
                      following:
                        type: boolean
                        example: false
        "404":
          $ref: "#/components/responses/NotFound"

  /api/profiles/{username}/follow:
    post:
      summary: Follow a user
      description: Follow a user by username. Authentication required.
      operationId: followUser
      tags:
        - Profiles
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: Username of the user to follow
      security:
        - BearerAuth: []
      responses:
        "200":
          description: User followed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  profile:
                    type: object
                    properties:
                      username:
                        type: string
                        example: john_doe
                      bio:
                        type: string
                        example: Software developer
                      image:
                        type: string
                        example: https://example.com/avatar.jpg
                      following:
                        type: boolean
                        example: true
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

    delete:
      summary: Unfollow a user
      description: Unfollow a user by username. Authentication required.
      operationId: unfollowUser
      tags:
        - Profiles
      parameters:
        - name: username
          in: path
          required: true
          schema:
            type: string
          description: Username of the user to unfollow
      security:
        - BearerAuth: []
      responses:
        "200":
          description: User unfollowed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  profile:
                    type: object
                    properties:
                      username:
                        type: string
                        example: john_doe
                      bio:
                        type: string
                        example: Software developer
                      image:
                        type: string
                        example: https://example.com/avatar.jpg
                      following:
                        type: boolean
                        example: false
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/articles:
    get:
      summary: List articles
      description: Retrieve a list of articles with optional filtering by tag, author, or favorited status. Supports pagination. Authentication is optional.
      operationId: listArticles
      tags:
        - Articles
      parameters:
        - name: tag
          in: query
          required: false
          schema:
            type: string
          description: Filter articles by tag name
          example: golang
        - name: author
          in: query
          required: false
          schema:
            type: string
          description: Filter articles by author username
          example: john_doe
        - name: favorited
          in: query
          required: false
          schema:
            type: boolean
          description: Filter articles by favorite status (true = favorited by current user, false = not favorited by current user). Authentication required for this filter.
          example: true
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
            maximum: 100
          description: Maximum number of articles to return
          example: 20
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            default: 0
          description: Number of articles to skip (for pagination)
          example: 0
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Articles list retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  articles:
                    type: array
                    items:
                      type: object
                      properties:
                        slug:
                          type: string
                          example: how-to-learn-golang
                        title:
                          type: string
                          example: How to Learn Golang
                        description:
                          type: string
                          example: A beginner's guide to learning Go programming language
                        body:
                          type: string
                          example: Golang is a great language for building scalable applications...
                        tagList:
                          type: array
                          items:
                            type: string
                          example:
                            - golang
                            - tutorial
                            - programming
                        createdAt:
                          type: string
                          format: date-time
                          example: 2025-12-17T10:00:00Z
                        updatedAt:
                          type: string
                          format: date-time
                          example: 2025-12-17T10:30:00Z
                        favorited:
                          type: boolean
                          example: false
                          description: Whether the current user has favorited this article
                        favoritesCount:
                          type: integer
                          example: 5
                        author:
                          type: object
                          properties:
                            username:
                              type: string
                              example: john_doe
                  articlesCount:
                    type: integer
                    example: 42
        "400":
          $ref: "#/components/responses/BadRequest"

    post:
      summary: Create article
      description: Create a new article. Authentication required.
      operationId: createArticle
      tags:
        - Articles
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - article
              properties:
                article:
                  type: object
                  required:
                    - title
                    - description
                    - body
                  properties:
                    title:
                      type: string
                      example: How to Learn Golang
                    description:
                      type: string
                      example: A comprehensive guide for beginners
                    body:
                      type: string
                      example: Golang is a powerful programming language...
                    tagList:
                      type: array
                      items:
                        type: string
                      example:
                        - golang
                        - tutorial
      security:
        - BearerAuth: []
      responses:
        "201":
          description: Article created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  article:
                    type: object
                    properties:
                      slug:
                        type: string
                        example: how-to-learn-golang
                      title:
                        type: string
                        example: How to Learn Golang
                      description:
                        type: string
                        example: A comprehensive guide for beginners
                      body:
                        type: string
                        example: Golang is a powerful programming language...
                      tagList:
                        type: array
                        items:
                          type: string
                        example:
                          - golang
                          - tutorial
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      favorited:
                        type: boolean
                        example: false
                      favoritesCount:
                        type: integer
                        example: 0
                      author:
                        type: object
                        properties:
                          username:
                            type: string
                            example: john_doe
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"

  /api/articles/feed:
    get:
      summary: Get article feed
      description: Get feed of articles from users that the current user follows. Authentication required.
      operationId: getFeedArticles
      tags:
        - Articles
      parameters:
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 20
            maximum: 100
          description: Maximum number of articles to return
          example: 20
        - name: offset
          in: query
          required: false
          schema:
            type: integer
            default: 0
          description: Number of articles to skip for pagination
          example: 0
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Feed retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  articles:
                    type: array
                    items:
                      type: object
                      properties:
                        slug:
                          type: string
                          example: how-to-learn-golang
                        title:
                          type: string
                          example: How to Learn Golang
                        description:
                          type: string
                          example: A beginner's guide to learning Go
                        body:
                          type: string
                          example: Golang is a powerful language...
                        tagList:
                          type: array
                          items:
                            type: string
                          example:
                            - golang
                        createdAt:
                          type: string
                          format: date-time
                          example: 2025-12-17T10:00:00Z
                        updatedAt:
                          type: string
                          format: date-time
                          example: 2025-12-17T10:30:00Z
                        favorited:
                          type: boolean
                          example: false
                        favoritesCount:
                          type: integer
                          example: 5
                        author:
                          type: object
                          properties:
                            username:
                              type: string
                              example: john_doe
                  articlesCount:
                    type: integer
                    example: 10
        "401":
          $ref: "#/components/responses/Unauthorized"

  /api/articles/{slug}:
    get:
      summary: Get article by slug
      description: Retrieve a single article by its slug. Authentication is optional.
      operationId: getArticleBySlug
      tags:
        - Articles
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Article retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  article:
                    type: object
                    properties:
                      slug:
                        type: string
                        example: how-to-learn-golang
                      title:
                        type: string
                        example: How to Learn Golang
                      description:
                        type: string
                        example: A beginner's guide
                      body:
                        type: string
                        example: Golang is powerful...
                      tagList:
                        type: array
                        items:
                          type: string
                        example:
                          - golang
                      createdAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:00:00Z
                      updatedAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:30:00Z
                      favorited:
                        type: boolean
                        example: false
                      favoritesCount:
                        type: integer
                        example: 5
                      author:
                        type: object
                        properties:
                          username:
                            type: string
                            example: john_doe
        "404":
          $ref: "#/components/responses/NotFound"

    put:
      summary: Update article
      description: Update an article. Title, description, and body are optional. When title is updated, slug is regenerated.
      operationId: updateArticle
      tags:
        - Articles
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - article
              properties:
                article:
                  type: object
                  properties:
                    title:
                      type: string
                      example: Updated Article Title
                    description:
                      type: string
                      example: Updated article description
                    body:
                      type: string
                      example: Updated article body content...
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Article updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  article:
                    type: object
                    properties:
                      slug:
                        type: string
                        example: updated-article-title
                      title:
                        type: string
                        example: Updated Article Title
                      description:
                        type: string
                        example: Updated article description
                      body:
                        type: string
                        example: Updated article body content...
                      tagList:
                        type: array
                        items:
                          type: string
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      favorited:
                        type: boolean
                      favoritesCount:
                        type: integer
                      author:
                        type: object
                        properties:
                          username:
                            type: string
                            example: john_doe
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

    delete:
      summary: Delete article
      description: Delete an article.
      operationId: deleteArticle
      tags:
        - Articles
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
      security:
        - BearerAuth: []
      responses:
        "204":
          description: Article deleted successfully
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/articles/{slug}/comments:
    post:
      summary: Create comment on article
      description: Add a comment to an article. Authentication required.
      operationId: createComment
      tags:
        - Comments
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - comment
              properties:
                comment:
                  type: object
                  required:
                    - body
                  properties:
                    body:
                      type: string
                      example: Great article! Really helpful.
      security:
        - BearerAuth: []
      responses:
        "201":
          description: Comment created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  comment:
                    type: object
                    properties:
                      id:
                        type: integer
                        format: int64
                        example: 1
                      createdAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:00:00Z
                      updatedAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:00:00Z
                      body:
                        type: string
                        example: Great article! Really helpful.
                      author:
                        type: object
                        properties:
                          username:
                            type: string
                            example: john_doe
                          bio:
                            type: string
                            example: Software developer
                          image:
                            type: string
                            example: https://example.com/avatar.jpg
                          following:
                            type: boolean
                            example: false
        "400":
          $ref: "#/components/responses/BadRequest"
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

    get:
      summary: Get article comments
      description: Get all comments for an article. Authentication is optional.
      operationId: getComments
      tags:
        - Comments
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
      security: []
      responses:
        "200":
          description: Comments retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          format: int64
                          example: 1
                        createdAt:
                          type: string
                          format: date-time
                          example: 2025-12-17T10:00:00Z
                        updatedAt:
                          type: string
                          format: date-time
                          example: 2025-12-17T10:00:00Z
                        body:
                          type: string
                          example: Great article! Really helpful.
                        author:
                          type: object
                          properties:
                            username:
                              type: string
                              example: john_doe
                            bio:
                              type: string
                              example: Software developer
                            image:
                              type: string
                              example: https://example.com/avatar.jpg
                            following:
                              type: boolean
                              example: false
        "404":
          $ref: "#/components/responses/NotFound"

  /api/articles/{slug}/comments/{id}:
    delete:
      summary: Delete comment
      description: Delete a comment from an article. Authentication required.
      operationId: deleteComment
      tags:
        - Comments
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
        - name: id
          in: path
          required: true
          schema:
            type: integer
            format: int64
          description: Comment ID
          example: 1
      security:
        - BearerAuth: []
      responses:
        "204":
          description: Comment deleted successfully
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

  /api/articles/{slug}/favorite:
    post:
      summary: Favorite an article
      description: Add an article to the current user's favorites. Authentication required.
      operationId: favoriteArticle
      tags:
        - Articles
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Article favorited successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  article:
                    type: object
                    properties:
                      slug:
                        type: string
                        example: how-to-learn-golang
                      title:
                        type: string
                        example: How to Learn Golang
                      description:
                        type: string
                        example: A beginner's guide
                      body:
                        type: string
                        example: Golang is powerful...
                      tagList:
                        type: array
                        items:
                          type: string
                        example:
                          - golang
                      createdAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:00:00Z
                      updatedAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:30:00Z
                      favorited:
                        type: boolean
                        example: true
                      favoritesCount:
                        type: integer
                        example: 6
                      author:
                        type: object
                        properties:
                          username:
                            type: string
                            example: john_doe
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

    delete:
      summary: Unfavorite an article
      description: Remove an article from the current user's favorites. Authentication required.
      operationId: unfavoriteArticle
      tags:
        - Articles
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: URL-friendly article slug
          example: how-to-learn-golang
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Article unfavorited successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  article:
                    type: object
                    properties:
                      slug:
                        type: string
                        example: how-to-learn-golang
                      title:
                        type: string
                        example: How to Learn Golang
                      description:
                        type: string
                        example: A beginner's guide
                      body:
                        type: string
                        example: Golang is powerful...
                      tagList:
                        type: array
                        items:
                          type: string
                        example:
                          - golang
                      createdAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:00:00Z
                      updatedAt:
                        type: string
                        format: date-time
                        example: 2025-12-17T10:30:00Z
                      favorited:
                        type: boolean
                        example: false
                      favoritesCount:
                        type: integer
                        example: 5
                      author:
                        type: object
                        properties:
                          username:
                            type: string
                            example: john_doe
        "401":
          $ref: "#/components/responses/Unauthorized"
        "404":
          $ref: "#/components/responses/NotFound"

components:
  responses:
    BadRequest:
      description: Invalid request body
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: invalid request body
    Unauthorized:
      description: Unauthorized - missing or invalid token
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: missing authorization header
    NotFound:
      description: User not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: user not found
    InvalidCredentials:
      description: Invalid credentials
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: invalid credentials
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from login endpoint

tags:
  - name: Health
    description: Health check endpoint
  - name: Authentication
    description: User authentication endpoints (Register, Login)
  - name: User
    description: User information endpoints
  - name: Profiles
    description: User profile endpoints (Get profile, Follow, Unfollow)
  - name: Articles
    description: Articles listing and management endpoints
  - name: Comments
    description: Comments management endpoints
